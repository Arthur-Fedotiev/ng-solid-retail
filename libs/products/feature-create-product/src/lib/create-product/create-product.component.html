<div *ngrxLet="vm$ as vm" class="tw-flex tw-flex-nowrap tw-justify-center">
  <section class="tw-w-11/12 sm:tw-w-3/5 md:tw-w-3/4 lg:tw-w-1/2">
    <h3 class="tw-text-2xl tw-mb-4">Create New Product</h3>
    <form [formGroup]="productForm" class="tw-flex tw-flex-col tw-flex-nowrap">
      <mat-form-field appearance="outline">
        <mat-label>Name</mat-label>
        <input placeholder="Product name" matInput formControlName="name" />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Description</mat-label>
        <textarea
          matInput
          placeholder="Product short description"
          formControlName="description"
        ></textarea>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Category</mat-label>
        <mat-select
          #category="matSelect"
          placeholder="Select Product Categories"
          formControlName="category"
          (valueChange)="updateSpecifications($event.name)"
        >
          <mat-option
            *ngFor="let category of vm.categories; trackBy: trackById"
            [value]="category"
            >{{ category.name }}</mat-option
          >
        </mat-select>
      </mat-form-field>

      <ng-container formGroupName="specifications">
        <ng-container
          *ngComponentOutlet="
            specificationCmp$ | async;
            inputs: specificationInputs
          "
        ></ng-container>
      </ng-container>

      <mat-form-field appearance="outline">
        <mat-label>SKU</mat-label>
        <input placeholder="Product SKU" matInput formControlName="sku" />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Image url</mat-label>
        <input
          type="text"
          placeholder="Product image url"
          matInput
          formControlName="url"
        />
      </mat-form-field>
      <sr-prices-form
        name="prices"
        [vm]="{
          retailers: vm.retailers
        }"
      ></sr-prices-form>
    </form>
  </section>
</div>
